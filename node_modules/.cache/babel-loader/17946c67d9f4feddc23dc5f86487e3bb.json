{"ast":null,"code":"var _jsxFileName = \"/Users/Jonny/Desktop/wordle-solver/src/components/stats/ImmigratePanel.tsx\",\n    _s = $RefreshSig$();\n\nimport { SaveIcon } from '@heroicons/react/outline';\nimport { useState } from 'react';\nimport { decrypt } from '../../lib/encryption';\nimport { saveGameStateToLocalStorage, saveStatsToLocalStorage } from '../../lib/localStorage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ImmigratePanel = () => {\n  _s();\n\n  const [isSaveButtonEnabled, setIsSaveButtonEnabled] = useState(false);\n  const textareaClassNames = {\n    valid: ['bg-gray-100', 'dark:bg-gray-700'],\n    invalid: ['bg-red-400', 'dark:bg-red-900']\n  };\n  const allClassNames = [...textareaClassNames.valid, ...textareaClassNames.invalid];\n\n  const handleImmigrationCodeChange = event => {\n    if (event.target instanceof Element) {\n      const textarea = event.target;\n      allClassNames.forEach(cn => textarea.classList.remove(cn));\n      setIsSaveButtonEnabled(false);\n      const text = textarea.value;\n\n      try {\n        var _decrypt;\n\n        const migrationStats = JSON.parse((_decrypt = decrypt(text)) !== null && _decrypt !== void 0 ? _decrypt : '');\n\n        if (!migrationStats || !migrationStats.gameState && !migrationStats.statistics) {\n          textareaClassNames.invalid.forEach(cn => textarea.classList.add(cn));\n          return;\n        }\n\n        textareaClassNames.valid.forEach(cn => textarea.classList.add(cn));\n        setIsSaveButtonEnabled(true);\n      } catch (error) {\n        textareaClassNames.invalid.forEach(cn => textarea.classList.add(cn));\n      }\n    }\n  };\n\n  const handleSaveButton = () => {\n    const textarea = document.getElementById('immigration-code');\n\n    if (textarea && window.confirm('Are you sure you want to override the statistics on this device? This action is not reversable.')) {\n      var _decrypt2;\n\n      var migrationStats = JSON.parse((_decrypt2 = decrypt(textarea.value)) !== null && _decrypt2 !== void 0 ? _decrypt2 : '');\n      if (!migrationStats) return;\n\n      if (migrationStats.gameState) {\n        saveGameStateToLocalStorage(true, migrationStats.gameState);\n      }\n\n      if (migrationStats.statistics) {\n        saveStatsToLocalStorage(migrationStats.statistics);\n      }\n\n      alert('The site will now reload.');\n      window.location.reload();\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"text-sm text-gray-500 dark:text-gray-300\",\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"message\",\n      className: \"mb-2 block text-left text-sm font-medium text-gray-900 dark:text-gray-400\",\n      children: \"Paste your migration code:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n      onChange: e => handleImmigrationCodeChange(e),\n      id: \"immigration-code\",\n      rows: 8,\n      className: \"block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      disabled: !isSaveButtonEnabled,\n      onClick: handleSaveButton,\n      type: \"button\",\n      className: \"mt-2 inline-flex items-center justify-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-left text-base font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:border-gray-200  disabled:bg-white disabled:text-gray-900 disabled:focus:outline-none disabled:dark:border-gray-600 disabled:dark:bg-gray-800 disabled:dark:text-gray-400 sm:text-sm\",\n      children: [isSaveButtonEnabled && /*#__PURE__*/_jsxDEV(SaveIcon, {\n        className: \"mr-2 h-6 w-6 cursor-pointer dark:stroke-white\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }, this), \"Save\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ImmigratePanel, \"QqTMBKk+dbPACwvjZqE+tDwAjJE=\");\n\n_c = ImmigratePanel;\n\nvar _c;\n\n$RefreshReg$(_c, \"ImmigratePanel\");","map":{"version":3,"sources":["/Users/Jonny/Desktop/wordle-solver/src/components/stats/ImmigratePanel.tsx"],"names":["SaveIcon","useState","decrypt","saveGameStateToLocalStorage","saveStatsToLocalStorage","ImmigratePanel","isSaveButtonEnabled","setIsSaveButtonEnabled","textareaClassNames","valid","invalid","allClassNames","handleImmigrationCodeChange","event","target","Element","textarea","forEach","cn","classList","remove","text","value","migrationStats","JSON","parse","gameState","statistics","add","error","handleSaveButton","document","getElementById","window","confirm","alert","location","reload","e"],"mappings":"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","sourcesContent":["import { SaveIcon } from '@heroicons/react/outline'\nimport { useState } from 'react'\n\nimport { decrypt } from '../../lib/encryption'\nimport {\n  saveGameStateToLocalStorage,\n  saveStatsToLocalStorage,\n} from '../../lib/localStorage'\nimport { MigrationStats } from '../modals/MigrateStatsModal'\n\nexport const ImmigratePanel = () => {\n  const [isSaveButtonEnabled, setIsSaveButtonEnabled] = useState(false)\n\n  const textareaClassNames = {\n    valid: ['bg-gray-100', 'dark:bg-gray-700'],\n    invalid: ['bg-red-400', 'dark:bg-red-900'],\n  }\n  const allClassNames = [\n    ...textareaClassNames.valid,\n    ...textareaClassNames.invalid,\n  ]\n\n  const handleImmigrationCodeChange = (event: any) => {\n    if (event.target instanceof Element) {\n      const textarea = event.target\n\n      allClassNames.forEach((cn) => textarea.classList.remove(cn))\n\n      setIsSaveButtonEnabled(false)\n\n      const text = textarea.value\n\n      try {\n        const migrationStats = JSON.parse(decrypt(text) ?? '') as MigrationStats\n        if (\n          !migrationStats ||\n          (!migrationStats.gameState && !migrationStats.statistics)\n        ) {\n          textareaClassNames.invalid.forEach((cn) => textarea.classList.add(cn))\n          return\n        }\n\n        textareaClassNames.valid.forEach((cn) => textarea.classList.add(cn))\n        setIsSaveButtonEnabled(true)\n      } catch (error) {\n        textareaClassNames.invalid.forEach((cn) => textarea.classList.add(cn))\n      }\n    }\n  }\n\n  const handleSaveButton = () => {\n    const textarea = document.getElementById(\n      'immigration-code'\n    ) as HTMLInputElement\n    if (\n      textarea &&\n      window.confirm(\n        'Are you sure you want to override the statistics on this device? This action is not reversable.'\n      )\n    ) {\n      var migrationStats = JSON.parse(\n        decrypt(textarea.value) ?? ''\n      ) as MigrationStats\n      if (!migrationStats) return\n\n      if (migrationStats.gameState) {\n        saveGameStateToLocalStorage(true, migrationStats.gameState)\n      }\n\n      if (migrationStats.statistics) {\n        saveStatsToLocalStorage(migrationStats.statistics)\n      }\n\n      alert('The site will now reload.')\n\n      window.location.reload()\n    }\n  }\n\n  return (\n    <div className=\"text-sm text-gray-500 dark:text-gray-300\">\n      <label\n        htmlFor=\"message\"\n        className=\"mb-2 block text-left text-sm font-medium text-gray-900 dark:text-gray-400\"\n      >\n        Paste your migration code:\n      </label>\n      <textarea\n        onChange={(e) => handleImmigrationCodeChange(e)}\n        id=\"immigration-code\"\n        rows={8}\n        className=\"block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500\"\n      ></textarea>\n      <button\n        disabled={!isSaveButtonEnabled}\n        onClick={handleSaveButton}\n        type=\"button\"\n        className=\"mt-2 inline-flex items-center justify-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-left text-base font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:border-gray-200 \n          disabled:bg-white disabled:text-gray-900 disabled:focus:outline-none disabled:dark:border-gray-600 disabled:dark:bg-gray-800 disabled:dark:text-gray-400 sm:text-sm\"\n      >\n        {isSaveButtonEnabled && (\n          <SaveIcon className=\"mr-2 h-6 w-6 cursor-pointer dark:stroke-white\" />\n        )}\n        Save\n      </button>\n    </div>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}